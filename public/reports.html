<html>
<head>
    <meta charset="utf-8">
    <title>Immersify Portal</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.1/dist/confetti.browser.js"></script>
    <script type="text/javascript" src="https://download.playfab.com/PlayFabClientApi.js"></script>
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <img src="/immersify_logo.e141b23db21f4b78051561bc464eace7.svg" alt="Immersify Logo" class="login-logo">
            <h2>Login</h2>
            <input type="text" id="username" placeholder="Username"><br>
            <input type="password" id="password" placeholder="Password"><br>
            <input type="button" id="loginButton" value="Login">
        </div>
    </div>
    
    <div class="form-container">
        <input id="google-login-btn" type="button" value="Login with Google" />
        <br />
        <input type="date" id="reportDate">
        <br />
        <input id="get-google-report-btn" type="button" value="Get Dev KPI report" />
        <br />
        <input id="get-apple-report-btn" type="button" value="Get Sub report" />
        <br />
        <input id="get-b2b-report-btn" type="button" value="Get B2B report" />
        <br />
        <p id="output-area"></p>
        <table id="reportTable" border="1">
            <thead>
                <tr>
                    <th>
                        <span class="info-tooltip">
                        Total Users (PlayFab)                        
                        <span class="info-tooltiptext">
                            Total number of users registered via PlayFab
                            <br/><br/>
                            Data source: PlayFab API
                            <br/><br/>
                            "GetPlayersInSegment" call with "All Players" segment
                        </span>
                        </span>
                    </th>
                    <td id="totalUsersPlayfab">data goes here</td>
                </tr>
                <tr><td style="height: 20px;" colspan="2"></td></tr>
                <tr>
                    <th>
                        <span class="info-tooltip">
                        Total B2B Users (PlayFab)
                        <span class="info-tooltiptext">
                            Total number of B2B Users
                            <br/><br/>
                            Data source: PlayFab
                            <br/><br/>
                            Iterates over all users and checks; "login email", "contact email" and "platform" [SSO] 
                            to see if any match a predefined list
                        </span>
                        </span>
                    </th>
                    <td id="totalB2BUsers">data goes here</td>
                </tr>
                <tr><td style="height: 20px;" colspan="2"></td></tr>
                <tr>
                    <th>
                        <span class="info-tooltip">
                        Total Google Subs
                        <span class="info-tooltiptext">
                            Total number of subscribers via Google Play Store
                            <br/><br/>
                            Data source: Google Play Store
                        </span>
                        </span>
                    </th>
                    <td class="wip-row" id="googleSubs">data goes here</td>
                </tr>
                <tr><td style="height: 20px;" colspan="2"></td></tr>
                <tr>
                    <th>Total Apple Subs</th>
                    <td class="wip-row" id="appleSubs">data goes here</td>
                </tr>
                <tr>
                    <th>Apple Trials</th>
                    <td class="wip-row" id="appleTrials">data goes here</td>
                </tr>
                <tr><td style="height: 20px;" colspan="2"></td></tr>
                <tr>
                    <th>Total Stripe Subs</th>
                    <td id="stripeSubs">data goes here</td>
                </tr>
                <tr><td style="height: 20px;" colspan="2"></td></tr>
                <tr>
                    <th>Total Subs</th>
                    <td class="wip-row" id="totalSubs">data goes here</td>
                </tr>
                <tr><td style="height: 20px;" colspan="2"></td></tr>
                <tr>
                    <th>Retention (PlayFab)</th>
                    <td id="userRetentionPlayfab">data goes here</td>
                </tr>
                <tr>
                    <th>MAU (PlayFab)</th>
                    <td id="MAUPlayfab">data goes here</td>
                </tr>
                <tr>
                    <th>New Users (Per Month, PlayFab)</th>
                    <td id="NewUsersPerMonthPlayfab">data goes here</td>
                </tr>
                <tr>
                    <th>DAU (Past 7 Days, PlayFab)</th>
                    <td id="DAUPlayfab">data goes here</td>
                </tr>
                <tr><td style="height: 20px;" colspan="2"></td></tr>
                <tr>
                    <th>Retention (GA)</th>
                    <td id="userRetention">data goes here</td>
                </tr>
                <tr>
                    <th>30 Day Retention (GA)</th>
                    <td id="userRetention30Days">data goes here</td>
                </tr>
                <tr>
                    <th>New Users (Past 7 days) (GA)</th>
                    <td id="newUsersPerWeek">data goes here</td>
                </tr>
                <tr>
                    <th>Returning Users Per Week (DAU) (GA)</th>
                    <td id="returningUsersPerWeek">data goes here</td>
                </tr>
                <tr>
                    <th>MAU (GA)</th>
                    <td id="MAU">data goes here</td>
                </tr>
                <tr>
                    <th>Active User Usage Time (GA)</th>
                    <td id="averageActiveUsageTime">data goes here</td>
                </tr>
                <tr>
                    <th>Total Sessions Per Active User (GA)</th>
                    <td id="sessionsPerUserPerWeek">data goes here</td>
                </tr>
                <tr>
                    <th>Total Activities Played Per Week (GA)</th>
                    <td id="activitiesLaunchedPerWeek">data goes here</td>
                </tr>
            </thead>
        </table>
    </div>

    <script type="module" src="scripts/reports-front.js"></script>
</body>
</html>